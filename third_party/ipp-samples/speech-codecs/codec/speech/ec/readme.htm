<html xmlns:v="urn:schemas-microsoft-com:vml" 
xmlns:o="urn:schemas-microsoft-com:office:office" 
xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv=Content-Type content="text/html; charset=iso-8859-1"><title>Intel&reg;Integrated Performance Primitives Sample Readme</title><style>
st1\:*{behavior:url(#ieooui) }   
</style>
<style>
<!-- p.MsoNormal, li.MsoNormal {margin-bottom:.0001pt; font-size:12.0pt; font-family:"Times New Roman"; color:black;
	margin-left: 0in;
	margin-right: 0in;
	margin-top: 0in;
} h1 {margin-right:0in; margin-left:0in; font-size:24.0pt; font-family:"Times New Roman"; color:black; font-weight:bold;
} h2 {margin-right:0in; margin-left:0in; font-size:18.0pt; font-family:"Times New Roman"; color:black; font-weight:bold;
} h3 {margin-right:0in; margin-left:0in; font-size:13.5pt; font-family:"Times New Roman"; color:black; font-weight:bold;
} h5 {margin-right:0in; margin-left:0in; font-size:10.0pt; font-family:"Times New Roman"; color:black; font-weight:bold;
} a:link, span.MsoHyperlink {color:blue;} a:visited {color:blue;} p {margin-right:0in; margin-left:0in; font-size:12.0pt; font-family:"Times New Roman"; color:black;
} span.mediumb-text1 {font-family:Arial; color:black; font-weight:bold;
} span.small-text1 {font-family:Arial; color:black;
} ol {margin-bottom:0in;} -->
</style>
</head>

<body bgcolor=white lang=EN-US link=blue vlink=blue><div class=Section1><h1 align=center style='text-align:center'><i>Intel <sup>&reg;</sup>Integrated Performance Primitives <br>USC Echo Canceller </i></h1><h5><a href="#Overview"><u>Overview </u></a><br><a href="#USC_EC_dscription"><u>USC EC algorithms description </u></a><br>&nbsp; </h5><h2><a name=Overview></a>Overview </h2><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'>An Echo Canceller basically <span class=GramE>represent </span>a type of algorithms or device for preventing an electric or acoustic feedback (an echo). The transfer function between the original (remote) signal and echoed with local voice signal can be reconstructed and thus echo replica removed. </p><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'>The job of the EC is to accurately estimate the transfer function (echo path) and <span class=SpellE>delayso </span>that a restore local room filter response <span class=SpellE>tooriginal </span>(for example loudspeaker signal) may be subtracted from the echoed signal (for example, microphone signal), thus cancelling the echo. The USC Echo Canceller basically implements a sample- and frequency- domain adaptive NLMS filter and DT controller algorithms. </p><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'><br>Additional information on this software as well as other Intel <sup>&reg;</sup>Software Development Products is available at <a href="http://developer.intel.com/software/products/"><u>http://developer.intel.com/software/products/ </u></a>. </p><h2><a name="USC_EC_dscription"></a>USC EC algorithms description </h2><h3 style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'><span class=SpellE><span style='font-size:12.0pt;color:windowtext'>Subband </span></span><span style='font-size:12.0pt;color:windowtext'>Affine Projection algorithm </span></h3><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'>&nbsp; </p><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'>The frequency domain block normalized least mean square (NLMS) adaptive filter has a relatively simple computational structure and modest complexity [Ash94]. The algorithm consists of the following steps: </p><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: .5in;text-indent:-.25in;'>1. <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>New input block. The most recently acquired N/2 input samples and the previous N/2 input samples make up the new input block. </p><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: .5in;text-indent:-.25in;'>2. <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>The FFT of the input is calculated. </p><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: .5in;text-indent:-.25in;'>3. <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Update input history. The most recent frequency-domain input blocks are retained. </p><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: .5in;text-indent:-.25in;'>4. <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Compute the adaptive and fixed filters output. The adaptive filter uses the low-latency structure described in [Ash94] where the filter impulse response is evenly divided into non-overlapping segments. The filter output is computed in the frequency domain, and then properly constrained (see step 11) such that the underlying convolution is linear. </p><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: .5in;text-indent:-.25in;'>5. <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Constrain the error for adaptive and fixed filter. First the time-domain filter output is computed via an inverse discrete Fourier transform. The time-domain error must be constrained to properly implement the adaptation step in the frequency-domain. </p><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: .5in;text-indent:-.25in;'>6. <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Update <span class=SpellE>subband </span>controller state and calculate step sizes for adaptation. Step sizes are averaged over the history of the &#8220;order&#8221; length according to [1]. </p><ol start=7 type=1><li class=MsoNormal style='text-align:justify;'>Update adaptive filter. The adaptive filter update is carried out in the frequency-domain. Segments of the adaptive filter response are updated independently. </li></ol><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: .5in;text-indent:-.25in;'>8. <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Constrain the adaptive filter response. To exactly implement the linear convolution (filtering) operation in the frequency domain, it is necessary to apply a constraint. The first half of each segment of the impulse response is retained and the rest set to zero. </p><ol start=9 type=1><li class=MsoNormal style='text-align:justify;'><span class=SpellE>Subband </span>controller. The controller compares powers of adaptive filter error and fixed filter error and tracks changes of adaptive filter coefficients power. If the adaptive filter has a significantly smaller error and is stable (which is indicated by coefficients power changing slowly), its coefficients are copied to the fixed filter. &nbsp;This case corresponds to &#8220;no double-talk&#8221; mode. If the fixed filter has a significantly smaller error, its coefficients are copied to the adaptive filter. This case corresponds to the double-talk mode. Send gain coefficient calculation (NLP block) is based on presence of the double-talk mode and changes of receive-in and send-in signal powers. </li></ol><h3 style='text-align:justify'><span class=GramE><span style='font-size:14.0pt'>&#8220; <span class=SpellE>Subband </span>-fast&#8221; algorithm steps. </span></span></h3><ol start=1 type=1><li class=MsoNormal style='text-align:justify;'>New input blocks (both receive-in and send-in signals). The most recent N input samples make up the input blocks. </li><li class=MsoNormal style='text-align:justify;'>Calculate <span class=SpellE>subband </span>representations for new input blocks. </li><li class=MsoNormal style='text-align:justify;'>Update input history. The most recent L frequency-domain input blocks are retained. </li><li class=MsoNormal style='text-align:justify;'>Same as step 4) of the <span class=SpellE>Subband </span>algorithm. </li><li class=MsoNormal style='text-align:justify;'>Calculate filters error (subtracting filter outputs from send-in signal) </li><li class=MsoNormal style='text-align:justify;'>Same as step 6) 7) 9) of the <span class=SpellE>Subband </span>algorithm. </li><li class=MsoNormal style='text-align:justify;'>Reconstruct output signal from fixed filter error. </li><li class=MsoNormal style='text-align:justify;'>Same as step 9) of the <span class=SpellE>Subband </span>algorithm. </li></ol><h3 style='text-align:justify'><span style='font-size:14.0pt'>&#8220;SAP&#8221; algorithm steps. </span></h3><p class=MsoNormal style='margin-left:.25in;text-align:justify'><span class=SpellE>Subband </span>algorithm is the kind of SAP algorithm with the order 1. In SAP algorithm step sizes are averaged over the history of the &#8220;order&#8221; length. </p><h3 style='text-align:justify'><span style='font-size:14.0pt'><span class=GramE>&#8220; <span class=SpellE>Fullband </span>&#8221; algorithm steps. </span></span></h3><ol start=1 type=1><li class=MsoNormal style='text-align:justify;'>New input frame. </li><li class=MsoNormal style='text-align:justify;'>Update history buffer </li><li class=MsoNormal style='text-align:justify;'>Compute output of fixed coefficient filter </li><li class=MsoNormal>Update <span class=SpellE>fullband </span>controller state, calculate step sizes for adaptation. </li><li class=MsoNormal>Calculate output of adaptive coefficient filter and do NLMS adaptation. </li><li class=MsoNormal style='text-align:justify;'>Same as 9) of the <span class=SpellE>Subband </span>algorithm </li></ol><h3 style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'>AEC Controller </h3><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'><br>The adaptive filter modifies its coefficients such that the filtered original signal best matches the echoed signal in the least squares sense. When the local voice is active, then the echo path is rather weak, and the transfer function is nearly linear, approaching the true transfer function.&nbsp; If both local voice and remote voices are active (a situation known as &#8220;double-talk&#8221;) then adaptive filter will not converge to the proper solution. Even when both local and remote voices are weak, they may still cause the adaptive filter to diverge. The controller addresses these problems by adjusting the adaptive filter step size <span class=GramE>( &#956; </span>in Step 5 above) such that the filter converges rapidly when the remote signal is present, but does not diverge quickly during double-talk or local voice presence. The controller also manages playback and output gain to block echo when the adaptive filter has diverged. </p><p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'>&nbsp;</p>
	<h3 style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'>
	Tone disabler</h3>
	<h3 style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'>&nbsp;</h3>
	<p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'>
	The tone disabler according to ITU-T G.168 specification is intended for 
	in-band disabling and enabling of the echo canceller.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<o:p>&nbsp; </o:p></p>
	&nbsp;<p style='margin-top:1.5pt;margin-right:0in;margin-bottom:1.5pt;margin-left: 0in'>Literature: </p><p class=MsoNormal>1. Hun <span class=SpellE>Choi </span>, <span class=SpellE>Hyeon-Deok Bae </span>, &#8220; <span class=SpellE>Subband </span>affine projection algorithm for acoustic echo cancellation system&#8221;. <span class=GramE><span class=mediumb-text1><span style='font-family:"Times New Roman"; font-weight:normal;'>EURASIP Journal on Applied Signal Processing </span><span style='font-family: "Times New Roman"'>. </span></span></span><span class=MsoHyperlink></span><span class=small-text1><span style='font-family:"Times New Roman"'>Volume 2007 Issue <span class=GramE>1 &nbsp;( </span>January 2007). </span></span>Pages: 146 - 146&nbsp;&nbsp; Year of Publication:&nbsp;2007 ISSN <span class=GramE>:1110 </span>-8657 , <span class=SpellE>Hindawi </span>Publishing Corp.&nbsp; <st1:place w:st="on"><st1:City w:st="on">New York </st1:City>, <st1:State w:st="on">NY </st1:State>, <st1:country-region w:st="on">United States </st1:country-region></st1:place>.</p>
</div>
<br>

<DIV id=IPP_Copyright>
Copyright &copy; 2005-2009, Intel Corporation. All rights reserved.
</DIV>

</body>
</html>